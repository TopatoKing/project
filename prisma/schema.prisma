generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider  = "postgresql"
  url       = env("DATABASE_URL")
  directUrl = env("DIRECT_URL")
}

model Orders {
  OrderID     Int  @id @default(autoincrement())
  OrderNumber Int
  UserID      String  @db.VarChar(255)
  StaffID     Int
  OrderStatus String
  OrderPaid   Boolean
  CakeNumber  Int
  CakeSize    Int
  Users       Users   @relation(fields: [UserID], references: [UserID])
  Staff       Staff   @relation(fields: [StaffID], references: [StaffID])
}

model Cakes {
  CakeID        Int          @id @default(autoincrement())
  CakeNumber    Int
  Type          String
  CakeStringID  String
  TypePrice     Float
  MinEst        Int
  MaxEst        Int
  CakeAllergens CakeAllergens[]
}

model Sizes {
  SizeID   Int @id @default(autoincrement())
  CakeSize Int
  Shape    String
  Price    Float
}

model Users {
  UserID       String   @id @db.VarChar(255)
  Order        Orders[]
  UserForename String
  UserSurname  String
  UserAddress  String?
  UserTown     String?
  UserCounty   String?
  UserPostcode String?
  UserEmail    String
  UserMobile   String?
  IsUserStaff  Boolean  @default(false)
}

model Staff {
  StaffID       Int   @id @default(autoincrement())
  Order         Orders[]
  StaffForename String
  StaffSurname  String
  StaffPosition String
}

model Allergens {
  AllergenID    Int          @id @default(autoincrement())
  AllergenName  String
  CakeAllergens CakeAllergens[]
}

model CakeAllergens {
  CakeAllergensID Int    @id @default(autoincrement())
  CakeID          Int
  AllergenID      Int
  Cakes           Cakes     @relation(fields: [CakeID], references: [CakeID])
  Allergens       Allergens @relation(fields: [AllergenID], references: [AllergenID])
}
